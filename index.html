
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="INSTALL/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>ChemRefine</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.e53b48f4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#automated-workflow-for-conformer-sampling-and-refinement" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="ChemRefine" class="md-header__button md-logo" aria-label="ChemRefine" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ChemRefine
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="ChemRefine" class="md-nav__button md-logo" aria-label="ChemRefine" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ChemRefine
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      Features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#development-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Development Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-prepare-input-files" class="md-nav__link">
    <span class="md-ellipsis">
      1. Prepare Input Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-run-the-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      2. Run the Workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-monitor-progress" class="md-nav__link">
    <span class="md-ellipsis">
      3. Monitor Progress
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-files-description" class="md-nav__link">
    <span class="md-ellipsis">
      Input Files Description
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Input Files Description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaml-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      YAML Configuration File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orca-template-files" class="md-nav__link">
    <span class="md-ellipsis">
      ORCA Template Files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sampling-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Sampling Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sampling Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#energy-window" class="md-nav__link">
    <span class="md-ellipsis">
      Energy Window
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boltzmann-population" class="md-nav__link">
    <span class="md-ellipsis">
      Boltzmann Population
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integer-count" class="md-nav__link">
    <span class="md-ellipsis">
      Integer Count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-multi-step-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      ** Example Multi-Step Workflows**
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-management" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Project Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    <span class="md-ellipsis">
      Contributing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#citation" class="md-nav__link">
    <span class="md-ellipsis">
      Citation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      License
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support" class="md-nav__link">
    <span class="md-ellipsis">
      Support
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="INSTALL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/conformer_sampling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conformer Sampling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/ts_finding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transition State Finding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/host-guest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Host-Guest Docking and Microsolvation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/mlip_training/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MLIP Training and Normal Mode Sampling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/oxidation.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Redox
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/spin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spin
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      Features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#development-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Development Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-prepare-input-files" class="md-nav__link">
    <span class="md-ellipsis">
      1. Prepare Input Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-run-the-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      2. Run the Workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-monitor-progress" class="md-nav__link">
    <span class="md-ellipsis">
      3. Monitor Progress
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-files-description" class="md-nav__link">
    <span class="md-ellipsis">
      Input Files Description
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Input Files Description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaml-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      YAML Configuration File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orca-template-files" class="md-nav__link">
    <span class="md-ellipsis">
      ORCA Template Files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sampling-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Sampling Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sampling Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#energy-window" class="md-nav__link">
    <span class="md-ellipsis">
      Energy Window
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boltzmann-population" class="md-nav__link">
    <span class="md-ellipsis">
      Boltzmann Population
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integer-count" class="md-nav__link">
    <span class="md-ellipsis">
      Integer Count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-multi-step-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      ** Example Multi-Step Workflows**
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-management" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Project Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    <span class="md-ellipsis">
      Contributing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#citation" class="md-nav__link">
    <span class="md-ellipsis">
      Citation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      License
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support" class="md-nav__link">
    <span class="md-ellipsis">
      Support
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<p><img alt="chemrefinelogo" src="https://github.com/user-attachments/assets/ae7b1ad5-0d90-445c-be83-ddcb76fa85c3" /></p>
<h1 id="automated-workflow-for-conformer-sampling-and-refinement"><strong>Automated Workflow for Conformer Sampling and Refinement.</strong></h1>
<p>This repository contains a streamlined Python code for automated ORCA workflow for conformer sampling, TS finding,  and refinement for DFT and MLIPs. The code automates the process of progressively refining the level of theory, eliminating the need for manual intervention. This code seamlessly integrates state-of-the-art MLIP's that can be accessed through ORCA inputs. This code is meant for HPC slurm submission system. Using an input yaml file we are able to automate the process of submitting calculations and then choosing a sampling method to choose the favored conformations, to then refine the calculation with more precise methods.</p>
<hr />
<h2 id="features"><strong>Features</strong></h2>
<ul>
<li><strong>Automated workflow</strong> for conformer sampling and refinement</li>
<li><strong>Progressive refinement</strong> of computational level across multiple steps</li>
<li><strong>Intelligent sampling</strong> with multiple selection algorithms (energy window, Boltzmann, integer-based)</li>
<li><strong>HPC integration</strong> with automatic SLURM job management and resource optimization</li>
<li><strong>Built-in analysis</strong> with CSV output and structure filtering</li>
<li><strong>Flexible configuration</strong> via YAML input files</li>
<li><strong>Error reduction</strong> and efficient resource utilization</li>
<li><strong>Machine Learning Interatomic potentials</strong> integration using pretrained <code>mace</code> and <code>FairChem models</code> models for fast geometry optimisation, molecular dynamics, and more.</li>
</ul>
<hr />
<h2 id="installation"><strong>Installation</strong></h2>
<h3 id="development-installation"><strong>Development Installation</strong></h3>
<pre><code class="language-bash"># Clone the repository
git clone --recursive https://github.com/sterling-research-group/ChemRefine.git
cd ChemRefine

# Install in development mode
pip install -e .
</code></pre>
<h3 id="requirements"><strong>Requirements</strong></h3>
<ul>
<li><strong>Python 3.6+</strong> with the following dependencies:</li>
<li><code>numpy</code> - Numerical computations</li>
<li><code>pyyaml</code> - YAML configuration parsing  </li>
<li><code>pandas</code> - Data analysis and CSV handling</li>
<li><code>ase</code> - Geometry handling and optimisation</li>
<li><code>mace-torch</code> - Machine learning force fields</li>
<li><code>torch == 2.5.1</code> - Machine Learning (if you use later version of Pytorch it might not work with UMA models)</li>
<li><strong>ORCA 6.0+</strong> - Quantum chemistry calculations</li>
<li><strong>SLURM</strong> - Job scheduling system for HPC</li>
<li><strong>MACE-torch</strong> - MLIP platform for MACE architecture</li>
<li><strong>FAIRChem</strong> - MLIP platform for UMA and esen models</li>
</ul>
<hr />
<h2 id="quick-start"><strong>Quick Start</strong></h2>
<h3 id="1-prepare-input-files"><strong>1. Prepare Input Files</strong></h3>
<p>Create the required input files in your working directory:</p>
<ul>
<li><strong>YAML Configuration</strong> (<code>input.yaml</code>): Defines the workflow steps</li>
<li><strong>Initial XYZ</strong> (<code>step1.xyz</code>): Starting molecular geometry  </li>
<li><strong>ORCA Templates</strong> (<code>step1.inp</code>, <code>step2.inp</code>, <code>step3.inp</code>... <code>orca.slurm.header</code>, <code>mlff.slurm.header</code>): Calculation templates for each step</li>
</ul>
<p>You must provide <strong>one ORCA input file</strong> (e.g., <code>step1.inp</code>, <code>step2.inp</code>, etc.) for <strong>each step</strong> defined in your <code>input.yaml</code> configuration file, otherwise you must define a MLFF step. For example, if your <code>input.yaml</code> specifies three ORCA steps, then you need three corresponding ORCA input files in your templates directory.</p>
<p>ChemRefine provides seamless MLIP integration through the use of the tool ExtOpt in Orca, which uses the ORCA optimization codes paired with ASE, you can use any optimization function of ORCA with MLIPS. For more <a href="https://github.com/faccts/orca-external-tools">information</a>.</p>
<p>In addition to these input files, you must include one of each:
- <strong><code>cpu.slurm.header</code></strong>: A SLURM submission script header with your cluster-specific job settings (e.g., partition, time limit, memory).
- <strong><code>cuda.slurm.header</code></strong>: Required for MLFF jobs. Include your GPU node configuration here so MLFF calculations run under SLURM.</p>
<p>Make sure to specify the path to your <strong>ORCA 6.0+</strong> executable in the <code>ORCA_EXEC</code> line of your header file(s). Adjust any other parameters (such as modules or memory) to fit your cluster environment.</p>
<h3 id="2-run-the-workflow"><strong>2. Run the Workflow</strong></h3>
<pre><code class="language-bash"># Basic usage
chemrefine input.yaml

# With custom core count
chemrefine input.yaml --maxcores 128

# Background execution (recommended for HPC)
nohup chemrefine input.yaml --maxcores 128 &amp;

# Skip any step (if already completed)
chemrefine input.yaml --skip
</code></pre>
<h3 id="3-monitor-progress"><strong>3. Monitor Progress</strong></h3>
<p>The tool provides detailed logging and creates organized output directories for each step:</p>
<pre><code>step1/          # Conformer generation outputs
step2/          # First refinement level outputs  
step3/          # Final high-level calculations
steps.csv       # Summary of energies and structures
</code></pre>
<hr />
<h2 id="input-files-description"><strong>Input Files Description</strong></h2>
<h3 id="yaml-configuration-file"><strong>YAML Configuration File</strong></h3>
<pre><code class="language-yaml">template_dir: &lt;location of template_files&gt;
scratch_dir:  &lt;location of your scratch directory&gt;
output_dir: &lt;location of your output directory&gt;
orca_executable: &lt;location of your ORCA executable&gt; 
charge: 0
multiplicity: 1
steps:
  - step: 1
    calculation_type: &quot;GOAT&quot;
    sampling:
      method: &quot;integer&quot;
      parameters:
        count: 10
  - step: 2
    calculation_type: &quot;DFT&quot;
    charge: -1                  # &lt;--- Step-specific override
    multiplicity: 2            # &lt;--- Step-specific override
    sampling:
      method: &quot;energy_window&quot;
      parameters:
        window: 0.5
  - step: 3
    calculation_type: &quot;MLFF&quot;
    mlff:
      model_name: &quot;medium&quot;  # For MACE: small,medium,large for FAIRCHEM &quot;uma-s-1&quot;
      task_type: &quot;mace_off&quot; # For MACE: &quot;mace_off&quot; or &quot;mace_mp&quot;, for FairChem: oc20, omat, omol, odac, omc
      bind: '127.0.0.1:8888'    # ChemRefine uses a local server to avoid initializing the model multiple times, only adjust this if you know what you're doing.
    sampling:
      method: &quot;integer&quot;
      parameters:
        num_structures: 1
</code></pre>
<p>The optional MLFF step uses a pretrained model from <code>mace</code> or <code>FairChem</code>. By default the
<code>mace-off</code> backend with the <code>"medium"</code> model is used, but you can select
different backends and models via <code>model_name</code> and <code>task_type</code>. With task_type you can select on what training data the model was trained on. 
If a CUDA-capable GPU is detected, the MLFF optimisation runs on the GPU; otherwise it falls back to the CPU automatically.</p>
<h3 id="orca-template-files"><strong>ORCA Template Files</strong></h3>
<ol>
<li><strong>First Input File</strong> (<code>step1.inp</code>):</li>
<li>Generally includes <strong>GOAT specifications</strong> for conformer optimization or another conformer sampler. </li>
<li>Uses cheap level of theory (e.g., XTB) for initial sampling</li>
<li>
<p>Example: <code>! GOAT XTB</code></p>
</li>
<li>
<p><strong>Subsequent Input Files</strong> (<code>step2.inp</code>, <code>step3.inp</code>, etc.):</p>
</li>
<li>Progressive refinement with higher-level methods</li>
<li><strong>Recommended</strong>: Include frequency calculations in final step</li>
<li>
<p>Example: <code>! B3LYP def2-TZVP FREQ</code></p>
</li>
<li>
<p><strong>Initial XYZ File</strong> (<code>step1.xyz</code>):</p>
</li>
<li>Starting molecular geometry</li>
<li>Standard XYZ format with atom count, comment line, and coordinates</li>
</ol>
<hr />
<h2 id="sampling-methods"><strong>Sampling Methods</strong></h2>
<h3 id="energy-window"><strong>Energy Window</strong></h3>
<pre><code class="language-yaml">method: &quot;energy_window&quot;
parameters:
  window: 0.5  # Hartrees
</code></pre>
<p>Selects conformers within specified energy range of the global minimum.</p>
<h3 id="boltzmann-population"><strong>Boltzmann Population</strong></h3>
<pre><code class="language-yaml">method: &quot;boltzmann&quot;
parameters:
  percentage: 95  # Cumulative population %
  temperature: 298.15  # Kelvin
</code></pre>
<p>Selects conformers based on Boltzmann population at given temperature.</p>
<h3 id="integer-count"><strong>Integer Count</strong></h3>
<pre><code class="language-yaml">method: &quot;integer&quot; 
parameters:
  count: 10  # Number of conformers
</code></pre>
<p>Selects the N lowest-energy conformers.</p>
<hr />
<h3 id="example-multi-step-workflows">** Example Multi-Step Workflows**</h3>
<p>The tool supports complex multi-step refinement protocols:
1. <strong>Step 1</strong>: GOAT or other conformer generation (XTB level)
2. <strong>Step 2</strong>: Machine Learning interatomic potential optimization (uma-s-1/omol)
2. <strong>Step 3</strong>: DFT geometry optimization (B3LYP/def2-SVP)
3. <strong>Step 4</strong>: High-level single points (B3LYP/def2-TZVP + frequencies)</p>
<h3 id="resource-management"><strong>Resource Management</strong></h3>
<ul>
<li>Automatic core allocation based on ORCA PAL settings</li>
<li>Intelligent job queuing to maximize cluster utilization</li>
<li>Real-time monitoring of SLURM job status</li>
</ul>
<hr />
<h2 id="project-structure"><strong>Project Structure</strong></h2>
<pre><code>auto-conformer-goat/
├── src/chemrefine          # Main package code
├── Examples/               # Example input files and SLURM scripts
├── docs                    # Files for the ChemRefine page
├── README.md               # This file
├── LICENSE                 # License
└── pyproject.toml          # Package configuration
</code></pre>
<hr />
<h2 id="contributing"><strong>Contributing</strong></h2>
<p>We welcome contributions! Please:
1. Fork the repository
2. Create a feature branch
3. Add tests for new functionality<br />
4. Submit a pull request</p>
<hr />
<h2 id="citation"><strong>Citation</strong></h2>
<p>If you use Auto-Conformer-GOAT in your research, please cite:</p>
<pre><code class="language-bibtex">@software{ChemRefine,
  title={ChemRefine},
  author={Sterling Research Group},
  url={https://github.com/sterling-research-group/ChemRefine},
  year={2025}
}
</code></pre>
<hr />
<h2 id="license"><strong>License</strong></h2>
<p>This project is licensed under the GNU General Public License v3.0 - see the <a href="LICENSE">LICENSE</a> file for details.</p>
<hr />
<h2 id="support"><strong>Support</strong></h2>
<p>For questions, issues, or feature requests:
- 📧 Email: ignacio.migliaro@utdallas.edu
- 🐛 Issues: <a href="https://github.com/sterling-research-group/ChemRefine/issues">GitHub Issues</a>
- 📖 Documentation: <a href="README.md">README.md</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>